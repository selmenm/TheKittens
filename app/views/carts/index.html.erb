
<!-- Page Title-->
    <div class="page-title d-flex" aria-label="Page title" style="background-image: url(img/page-title/shop-pattern.jpg);">
      <div class="container text-left align-self-center">
       
        <h1 class="page-title-heading text-center">My Cart</h1>
      </div>
    </div>
    <!-- Page Content-->
    <div class="container pb-5 mb-2">
      <!-- Cart Item-->

    

    <% @total = 0 %>
    <% @carts.each do |cart| %>
      <div class="cart-item d-md-flex justify-content-between">
        <a class="featured-product" data-confirm="Are you sure?" rel="nofollow" data-method="delete" href="/carts/<%= cart.id %>">
        <span class="remove-item"><i class="far fa-times-circle"></i></span></a>
        <div class="px-3 my-3"><a class="cart-item-product" href="shop-single.html">
          <div class="cart-item-product-thumb"><img class="test" src="<%= cart.item.image_url %>" alt="Product"></div>
          <div class="cart-item-product-info">
            <h4 class="cart-item-product-title"><%= cart.item.title %></h4><span><strong>Category:</strong><%= Breed.find(Item.find(cart.item.id).breed_id).name %></span>
            </div></a></div>

        <div class="px-3 my-3 text-center">
          <div class="cart-item-label">Quantity</div>
            <div class="btn-group" role="group" aria-label="Basic example">
              <button type="button" class="btn btn-secondary-minus"><i class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-secondary-plus"><i class="fas fa-plus"></i></button>
            </div>
        </div>

        <div class="px-3 my-3 text-center">
          <div class="cart-item-label">Subtotal</div><span class="text-xl font-weight-medium"><% @total += cart.item.price.to_i %><%= cart.item.price.to_i %>.00€</span>
        </div>        
      </div>
    <% end %>
      <!--  Subtotal-->
      <div class="d-sm-flex justify-content-between align-items-center text-center text-sm-left">
    <!-- Right Aligned -->
        <div class="animated-digits 
        " data-number="<%= @total %>">
          <h5 class="animated-digits-digit">€<span>0</span></h5>
          <p class="animated-digits-text">Total Cost</p>
        </div>
      </div>
      <!-- Buttons-->
      <hr class="my-2">
      <div class="row pt-3 pb-5 mb-2">
        <%= form_tag({controller: "carts", action: "payment"}, method: "get") do %>
          <article>
            <% if flash[:error].present? %>
              <div id="error_explanation">
                <p><%= flash[:error] %></p>
              </div>
            <% end %>
            <label class="amount">
              <span></span>
            </label>
          </article>

          <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                  data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
                  data-description="Achat"
                  data-label="Checkout"
                  data-amount=@total
                  data-locale="auto">
          </script>
          <script>document.getElementsByClassName("stripe-button-el")[0].style.display = 'none';</script>
          <button type="submit" class="btn btn-accent mt-0 btn-sm">Checkout</button>
        <% end %>
      </div>
    </div>

<script>
 // const $minus = $(document.querySelectorAll(".btn-secondary-minus"))
 // const $plus = $(document.querySelectorAll(".btn-secondary-plus"))

//  const $image = $(document.querySelectorAll(".test"))

//      $(document).ready(function(){


  //      $minus.on('click', () =>{

    //      $image.hide();
  //      });

 //      $plus.on('click', () =>{

    //      $image.toggle();
  //      });
 
//      });



</script>

